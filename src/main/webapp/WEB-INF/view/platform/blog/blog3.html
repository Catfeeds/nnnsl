<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>JS版组织结构图</title>
	<script language="javascript" src="/static/lct/organization.js"></script>
	<style type="text/css">
		.OrgBox{
			font-size:12px;
			padding:5px 5px 5px 5px;
			clear:left;
			float:left;
			text-align:center;
			position:absolute;
			width:70px;
			height:106px;
		}
		.OrgBox img{
			width:60px;
			height:70px;
		}
		.OrgBox div{
			color:#FFA500;
			font-weight:800;
		}
	</style>
	<script>
        // var box = document.getElementById('OrgBox');
        //box.onclick
        function CookieGroup(){
            document.body.innerHTML="";

            var ccc = new OrgNode()
            var bbb = new OrgNode()
            console.log(bbb)
            ccc.customParam = bbb;
            console.log(ccc)

            var a=new OrgNode()
            a.customParam.EmpName="张明"
            a.customParam.department="总经办"
            a.customParam.EmpPhoto="/static/lct/read.png"
            var b=new OrgNode()
            b.customParam.EmpName="陈黎明"
            b.customParam.department="运营部"
            b.customParam.EmpPhoto="/static/lct/read.png"
            var c=new OrgNode()
            c.customParam.EmpName="新员工"
            c.customParam.department="已审"
            c.customParam.EmpPhoto="/static/lct/read.png"
            var d=new OrgNode()
            d.customParam.EmpName="新员工的下属"
            d.customParam.department="已审"
            d.customParam.EmpPhoto="/static/lct/read.png"
            var e=new OrgNode()
            var f=new OrgNode()
            var g=new OrgNode()
            var h=new OrgNode()
            var k1=new OrgNode()
            var x=new OrgNode()
            var y=new OrgNode()
            var z=new OrgNode()
            var z1=new OrgNode()
            var z11=new OrgNode()
            var z12=new OrgNode()
            var z13=new OrgNode()
            z1.Nodes.Add(z11);
            z1.Nodes.Add(z12);
            z1.Nodes.Add(z13);
            var z2=new OrgNode()
            z2.Text="三-2"
            z2.Description="zxxxcz"
            var y1=new OrgNode()
            y1.Text="三员工一-1"
            y1.Description="zxxxcz"
            var y2=new OrgNode()
            y2.Text="三员工一-2"
            y2.Description="zxxxcz"
            var y21=new OrgNode()
            y21.Text="三员工一-2-1"
            y21.Description="zxxxcz"
            var y22=new OrgNode()
            y22.Text="三员工一-2-2"
            y22.Description="zxxxcz"
            y2.Nodes.Add(y21);
            y2.Nodes.Add(y22);
            c.Nodes.Add(f);
            var OrgShows=new OrgShow(a);
            OrgShows.Top=50;
            OrgShows.Left=50;
            OrgShows.IntervalWidth=10;
            OrgShows.IntervalHeight=20;
            //OrgShows.ShowType=2;
            //OrgShows.BoxHeight=100;
            console.log(a)
            OrgShows.BoxTemplet="<div id=\"{Id}\" class=\"OrgBox\" onclick=\"CookieGroup()\"><img src=\"{EmpPhoto}\" /><span>{EmpName}</span><span>{TTT}</span><div>{department}</div></div>"
            OrgShows.Run()
        }
	</script>
</head>
<body>
<script language="javascript">

    var a=new OrgNode()
    a.customParam.EmpName="张明"
    a.customParam.department="总经办"
    a.customParam.EmpPhoto="/static/lct/read.png"
	var ccc = new OrgNode()
    var list = ${list};
    var newlist = new Array();
    for ( var i = 0; i <list.length; i++){
        var temp = new OrgNode();
        temp.Id = list[i].id
        temp.pid = list[i].pid
        temp.customParam.EmpName = list[i].EmpName
//        temp.Nodes=new Array()
        newlist.push(temp);
    }

    for(var i = 0; i< newlist.length;i++){
        var id = newlist[i].Id
        var ppid = newlist[i].pid
        if(ppid===0){
            a.Nodes.Add(newlist[i])
        }
        for(var j = 0;j<newlist.length;j++){
            var pid = newlist[j].pid
            console.log("pid================="+pid)
            if(id === pid){
                newlist[i].Nodes.Add(newlist[j]);
                console.log("aaa")
                console.log(newlist[i])
                console.log("bbb")
                console.log(newlist[j])
            }
        }
    }
    console.log(newlist)
    var ddd = list[1]
            console.log("================"+ddd.EmpName)
    ccc.customParam.EmpName = '${customParam.EmpName}'
    ccc.customParam.department= '${customParam.department}'
    ccc.customParam.EmpPhoto= '${customParam.EmpPhoto}'
    ccc.Id = "123123"
    ccc.parentNode = "222"

    ccc.Id = "222"
    var b=new OrgNode()
    b.customParam.EmpName="陈黎明"
    b.customParam.department="运营部"
    b.customParam.EmpPhoto="/static/lct/read.png"
    var c=new OrgNode()
    c.customParam.EmpName="新员工"
    c.customParam.department="已审"
    c.customParam.EmpPhoto="/static/lct/read.png"
    var d=new OrgNode()
    d.customParam.EmpName="新员工的下属"
    d.customParam.department="已审"
    d.customParam.EmpPhoto="/static/lct/read.png"
    var e=new OrgNode()
    var f=new OrgNode()
    var g=new OrgNode()
    var h=new OrgNode()
    var k1=new OrgNode()
    var x=new OrgNode()
    var y=new OrgNode()
    var z=new OrgNode()
    var z1=new OrgNode()
    var z11=new OrgNode()
    var z12=new OrgNode()
    var z13=new OrgNode()
    z1.Nodes.Add(z11);
    z1.Nodes.Add(z12);
    z1.Nodes.Add(z13);
    var z2=new OrgNode()
    z2.Text="三-2"
    z2.Description="zxxxcz"
    var y1=new OrgNode()
    y1.Text="三员工一-1"
    y1.Description="zxxxcz"
    var y2=new OrgNode()
    y2.Text="三员工一-2"
    y2.Description="zxxxcz"
    var y21=new OrgNode()
    y21.Text="三员工一-2-1"
    y21.Description="zxxxcz"
    var y22=new OrgNode()
    y22.Text="三员工一-2-2"
    y22.Description="zxxxcz"
    y2.Nodes.Add(y21);
    y2.Nodes.Add(y22);
    y.Nodes.Add(y1);
    y.Nodes.Add(y2);
    z.Nodes.Add(z1);
    z.Nodes.Add(z2);
    x.Nodes.Add(y);
    x.Nodes.Add(z);
    g.Nodes.Add(h);
    g.Nodes.Add(k1);
    a.Nodes.Add(b);
    a.Nodes.Add(x);
    a.Nodes.Add(c);
    b.Nodes.Add(g);
    c.Nodes.Add(d);
    c.Nodes.Add(e);
    c.Nodes.Add(f);
    c.Nodes.Add(ccc)
//    ccc.Nodes.Add(abc)
    console.log(ccc)
    var OrgShows=new OrgShow(a);
    OrgShows.Top=50;
    OrgShows.Left=50;
    OrgShows.IntervalWidth=10;
    OrgShows.IntervalHeight=20;
    //OrgShows.ShowType=2;
    //OrgShows.BoxHeight=100;
    OrgShows.BoxTemplet="<div id=\"{Id}\" class=\"OrgBox\" onclick=\"CookieGroup()\"><img src=\"{EmpPhoto}\" /><span>{EmpName}</span><div>{department}</div></div>"
    OrgShows.Run()
</script>

</body>
</html>